(function(){"use strict";var t={2842:function(t,e,s){var o=s(3751),a=s(641);const l={class:"form-signin w-100 m-auto"};function r(t,e,s,o,r,i){const u=(0,a.g2)("Nav"),n=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(u),(0,a.Lk)("main",l,[(0,a.bF)(n)])],64)}const i=t=>((0,a.Qi)("data-v-d6faf342"),t=t(),(0,a.jt)(),t),u={class:"d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom",style:{"background-color":"#347c99"}},n=i((()=>(0,a.Lk)("a",{class:"navbar-brand text-white"},"Журнал учёта успеваемости и посещаемости обучающихся",-1))),h={key:0,class:"col-md-3 text-end"},c=i((()=>(0,a.Lk)("button",{type:"button",class:"btn btn-outline-light me-2"}," Вход в аккаунт ",-1))),d=[c],p={key:1},k={class:"nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0"},g={key:0},v={key:1},m={key:2},y={key:3},L={class:"col-md-3 text-end"};function b(t,e,s,o,l,r){const i=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("header",u,[n,t.user?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",h,d)),t.user?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.Lk)("ul",k,[(0,a.Lk)("li",null,[(0,a.bF)(i,{to:"/profile",class:"nav-link px-2 text-white"},{default:(0,a.k6)((()=>[(0,a.eW)("Профиль")])),_:1})]),"teacher"==t.user.role?((0,a.uX)(),(0,a.CE)("li",g,[(0,a.bF)(i,{to:"/journalwriteteacher",class:"nav-link px-2 text-white"},{default:(0,a.k6)((()=>[(0,a.eW)("Заполнение журнала")])),_:1})])):(0,a.Q3)("",!0),"teacher"==t.user.role?((0,a.uX)(),(0,a.CE)("li",v,[(0,a.bF)(i,{to:"/checkteacher",class:"nav-link px-2 text-white"},{default:(0,a.k6)((()=>[(0,a.eW)("Просмотр журнала")])),_:1})])):(0,a.Q3)("",!0),"student"==t.user.role?((0,a.uX)(),(0,a.CE)("li",m,[(0,a.bF)(i,{to:"/checkstudent",class:"nav-link px-2 text-white"},{default:(0,a.k6)((()=>[(0,a.eW)("Просмотр журнала")])),_:1})])):(0,a.Q3)("",!0),"admin"==t.user.role?((0,a.uX)(),(0,a.CE)("li",y,[(0,a.bF)(i,{to:"/admin",class:"nav-link px-2 text-white"},{default:(0,a.k6)((()=>[(0,a.eW)("Регистрация пользователей")])),_:1})])):(0,a.Q3)("",!0),(0,a.Lk)("li",null,[(0,a.Lk)("div",L,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-light me-2",onClick:e[0]||(e[0]=(...t)=>r.LogOut&&r.LogOut(...t))}," Выход ")])])])])):(0,a.Q3)("",!0)])}s(4114);var f=s(6278),w={name:"UNav",methods:{LogOut(){localStorage.removeItem("token"),this.$router.push("/"),this.$store.dispatch("user",null)}},computed:{...(0,f.L8)(["user"])}},C=s(6262);const E=(0,C.A)(w,[["render",b],["__scopeId","data-v-d6faf342"]]);var _=E,X=s(1250),T={name:"App",components:{Nav:_},async created(){try{const t=await X.A.get("/profile");this.$store.dispatch("user",t.data)}catch(t){console.error("Ошибка нахождения профиля пользователя",t),this.error="Ошибка нахождения профиля пользователя. Пожалуйста, попробуйте снова."+t}}};const G=(0,C.A)(T,[["render",r]]);var A=G,I=s(5220),F=s(33);const U={key:0},j=(0,a.Lk)("h2",{style:{color:"#347c99d6"}}," Страница заполнения журнала учёта успеваемости и посещаемости обучающихся ",-1),J={class:"info-for-completion"},z=(0,a.Lk)("h2",null,"Преподаватель:",-1),Q=(0,a.Lk)("option",{value:"",disabled:"",selected:""},"Преподаватель",-1),x=["value"],V=(0,a.Lk)("h2",null,"Группа:",-1),D=(0,a.Lk)("option",{value:"",disabled:""},"Выберите группу",-1),K=(0,a.Lk)("h2",null,"Дисциплина:",-1),W=(0,a.Lk)("option",{value:"",disabled:""},"Выберите дисциплину",-1),S=["value"],$=(0,a.Lk)("h2",null,"Выберите дату:",-1),q=["max"],O=(0,a.Lk)("h2",null,"Тип занятия:",-1),P=(0,a.Lk)("option",{value:"",disabled:""},"Выберите тип занятия",-1),B=["value"],N=(0,a.Lk)("h2",null,"Введите номер занятия:",-1),M=(0,a.Lk)("h4",null," (Если за день было несколько повторяющихся пар с одинаковым видом работы, то выберите номер заполняемого занятия, если пара была одна или вид работ разный, то оставьте 1) ",-1),R=(0,a.Fv)('<option value="0" selected>1</option><option value="1">2</option><option value="2">3</option><option value="3">4</option><option value="4">5</option><option value="5">6</option>',6),H=[R],Y=(0,a.Lk)("br",null,null,-1),Z=["disabled"],tt={key:0},et=(0,a.Lk)("h1",{style:{color:"red"}},"Балл не соответствует виду занятия",-1),st=[et],ot={class:"table"},at={key:0},lt={class:"iksweb"},rt=(0,a.Lk)("tr",null,[(0,a.Lk)("th",{rowspan:"4"},"Список студентов")],-1),it=(0,a.Lk)("tr",null,[(0,a.Lk)("th",{colspan:"3"},"Дата")],-1),ut={colspan:"3"},nt=(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"Посещаемость"),(0,a.Lk)("th",null,"Успеваемость"),(0,a.Lk)("th",null,"Задание/Тема")],-1),ht=["value"],ct=["onChange","onUpdate:modelValue"],dt=(0,a.Lk)("option",{value:"",disabled:"",selected:""}," Отметка присутствия ",-1),pt=(0,a.Lk)("option",{value:"П"},"Присутствие",-1),kt=(0,a.Lk)("option",{value:"О"},"Отсутствие",-1),gt=(0,a.Lk)("option",{value:"ОПУ"}," Отсутствие по уважительной причине ",-1),vt=(0,a.Lk)("option",{value:"ОПБ"},"Отсутствие по болезни",-1),mt=[dt,pt,kt,gt,vt],yt=["onChange","onUpdate:modelValue"],Lt=["onChange","onUpdate:modelValue"],bt={key:1},ft=(0,a.Lk)("h3",null,"Успешно сохранено!",-1),wt=[ft],Ct={key:2},Et=(0,a.Lk)("h3",{style:{color:"red"}}," Не удалось сохранить данные, попробуйте ещё раз! ",-1),_t=[Et],Xt={key:3},Tt=(0,a.Lk)("h3",{style:{color:"red"}}," Данные по текущему занятию уже существуют, пожалуйста, проверьте корректность введённых данных. ",-1),Gt=[Tt],At={key:4},It=(0,a.Lk)("p",{style:{color:"red"}}," Вы не вошли в аккаунт. Пожалуйста, авторизуйтесь. ",-1),Ft=[It],Ut={key:5},jt=(0,a.Lk)("p",{style:{color:"red"}},"У вас нет прав доступа к этой странице",-1),Jt=[jt];function zt(t,e,s,l,r,i){return t.user&&"teacher"==t.user.role?((0,a.uX)(),(0,a.CE)("div",U,[j,(0,a.Lk)("form",J,[z,(0,a.bo)((0,a.Lk)("select",{onChange:e[0]||(e[0]=t=>i.selectedGroup()),"onUpdate:modelValue":e[1]||(e[1]=t=>r.teacher=t)},[Q,(0,a.Lk)("option",{value:t.user.id},(0,F.v_)(t.user.username),9,x)],544),[[o.u1,r.teacher]]),V,(0,a.bo)((0,a.Lk)("select",{onChange:e[2]||(e[2]=t=>i.selectedDisc()),"onUpdate:modelValue":e[3]||(e[3]=t=>r.gr=t)},[D,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.groups,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.id},(0,F.v_)(t.group),1)))),128))],544),[[o.u1,r.gr]]),K,(0,a.bo)((0,a.Lk)("select",{onChange:e[4]||(e[4]=t=>i.selectedType()),"onUpdate:modelValue":e[5]||(e[5]=t=>r.discz=t)},[W,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.discs,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.discipline,value:t.discipline},(0,F.v_)(t.name),9,S)))),128))],544),[[o.u1,r.discz]]),$,(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=t=>r.date=t),max:i.maxDate,required:"",pattern:"\\d{4}-\\d{2}-\\d{2}"},null,8,q),[[o.Jo,r.date]]),O,(0,a.bo)((0,a.Lk)("select",{onChange:e[7]||(e[7]=t=>i.selectedWorkload()),"onUpdate:modelValue":e[8]||(e[8]=t=>r.type=t)},[P,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.types,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.load,value:t.load},(0,F.v_)(t.type),9,B)))),128))],544),[[o.u1,r.type]]),N,M,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>r.kolvo=t)},H,512),[[o.u1,r.kolvo]])]),Y,(0,a.Lk)("button",{disabled:i.button(),type:"button",onClick:e[10]||(e[10]=t=>{i.fetchGroup(this.gr),i.sendData()}),class:"btn"}," Создать страницу журнала ",8,Z),(0,a.Lk)("button",{type:"button",onClick:e[11]||(e[11]=t=>i.Abnull()),class:"btn",style:{"margin-left":"10px"}}," Сбросить данные "),1==this.signal?((0,a.uX)(),(0,a.CE)("div",tt,st)):(0,a.Q3)("",!0),(0,a.bF)(o.eB,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",ot,[1==r.r?((0,a.uX)(),(0,a.CE)("div",at,[(0,a.Lk)("h1",null,"Страница журнала группы "+(0,F.v_)(r.gr),1),(0,a.Lk)("table",lt,[(0,a.Lk)("tbody",null,[rt,it,(0,a.Lk)("tr",null,[(0,a.Lk)("td",ut,(0,F.v_)(r.date),1)]),nt]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.backGroup,((t,e)=>((0,a.uX)(),(0,a.CE)("tr",{key:t.id,value:t.id,ref_for:!0,ref:"tr"},[(0,a.Lk)("td",null,(0,F.v_)(t.name)+" "+(0,F.v_)(t.patronymic)+" "+(0,F.v_)(t.lastname),1),(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("select",{onChange:s=>i.selectedPosh(s,e,t.id),"onUpdate:modelValue":t=>r.backGroup[e].otm_posh=t},mt,40,ct),[[o.u1,r.backGroup[e].otm_posh]])]),(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("input",{type:"number",onChange:s=>i.selectedOtm(s,e+1,t.id),"onUpdate:modelValue":t=>r.backGroup[e].otm_usp=t},null,40,yt),[[o.Jo,r.backGroup[e].otm_usp]])]),(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("input",{type:"text",onChange:s=>i.selectedTask(s,e,t.id),"onUpdate:modelValue":t=>r.backGroup[e].task=t},null,40,Lt),[[o.Jo,r.backGroup[e].task]])])],8,ht)))),128))])]),(0,a.Lk)("button",{class:"btn btn-primary w-100 py-2",onClick:e[12]||(e[12]=t=>i.Save())}," Сохранить ")])):(0,a.Q3)("",!0)])])),_:1}),1==r.save?((0,a.uX)(),(0,a.CE)("div",bt,wt)):(0,a.Q3)("",!0),1==r.errorsave2?((0,a.uX)(),(0,a.CE)("div",Ct,_t)):(0,a.Q3)("",!0),1==r.errorsave?((0,a.uX)(),(0,a.CE)("div",Xt,Gt)):(0,a.Q3)("",!0),!t.user&&r.error?((0,a.uX)(),(0,a.CE)("div",At,Ft)):(0,a.Q3)("",!0),t.user&&"teacher"!=t.user.role?((0,a.uX)(),(0,a.CE)("div",Ut,Jt)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)}var Qt={name:"JournalWriteTeacher",data(){return{teacher:"",gr:"",discz:"",date:"",type:"",zadanie:"",backTeacher:[],groups:[],discs:[],types:[],backGroup:[],workload:[],resGroup:[],backJournal:[],worklodid:"",show:!1,save:!1,kolv:[],r:!1,error:!1,kolvo:"0",errorsave:!1,errorsave2:!1,signal:!1,errorscheck:[]}},computed:{...(0,f.L8)(["user"]),maxDate(){const t=(new Date).toISOString().split("T")[0];return t}},created(){setTimeout((()=>{this.user||(this.error=!0,setTimeout((()=>{this.$router.push("/"),this.$store.dispatch("user",null)}),100)),this.user&&"teacher"!=this.user.role&&setTimeout((()=>{this.$router.push("/profile")}),100)}),1e3)},methods:{Abnulltabl(){setTimeout((()=>{this.save=!1,this.teacher="",this.gr="",this.discz="",this.teacher="",this.date="",this.type="",this.zadanie=""}),1e3),this.backJournal=[],this.backGroup=[],this.worklodid="",this.groups=[],this.discs=[],this.workload=[],this.resGroup=[],this.types=[],this.show=!1,this.r=!1,this.kolv=[],this.errorsave=!1,this.errorsave2=!1},Abnull(){this.r=!1,this.save=!1,this.teacher="",this.gr="",this.discz="",this.teacher="",this.date="",this.type="",this.zadanie="",this.types=[],this.errorsave=!1,this.kolv=[],this.backJournal=[],this.backGroup=[],this.worklodid="",this.groups=[],this.discs=[],this.workload=[],this.resGroup=[],this.show=!1,this.errorsave=!1,this.errorsave2=!1,this.errorscheck=[]},selectedGroup(){this.getInfoByTeacherGroup(this.teacher)},selectedDisc(){this.getInfoByTeacherDisc(this.teacher,this.gr)},selectedType(){this.getInfoByTeacherType(this.teacher,this.gr,this.discz)},selectedWorkload(){this.getInfoAboutWorkload(this.teacher,this.group,this.discz,this.type)},selectedOtm(t,e,s){t.target.value<71&&2!=this.type&&3!=this.type&&9!=this.type&&"П"==this.backGroup[e-1].otm_posh&&(this.backGroup.forEach((e=>{e.id===s&&(e.otm_usp=t.target.value)})),this.backJournal.forEach((e=>{e[1]===s&&(e[3]=t.target.value)}))),t.target.value<=30&&2==this.type|3==this.type|9==this.type&&"П"==this.backGroup[e-1].otm_posh&&(this.backGroup.forEach((e=>{e.id===s&&(e.otm_usp=t.target.value)})),this.backJournal.forEach((e=>{e[1]===s&&(e[3]=t.target.value)}))),(t.target.value>30&&"2"==this.type|"3"==this.type|"9"==this.type)|(t.target.value>70&&"2"!=this.type&&"3"!=this.type&&"9"!=this.type)|"П"!=this.backGroup[e-1].otm_posh&&(this.backGroup[e-1].otm_usp="0",this.signal=!0,setTimeout((()=>{this.signal=!1}),2e3))},selectedTask(t,e,s){this.backGroup.forEach((e=>{e.id===s&&(e.task=t.target.value)})),this.backJournal.forEach((e=>{e[1]===s&&(e[5]=t.target.value)}))},selectedPosh(t,e,s){this.backGroup.forEach((e=>{e.id===s&&(e.otm_posh=t.target.value)})),this.backJournal.forEach((e=>{e[1]===s&&(e[4]=t.target.value)}))},async sendData(){try{const t=await X.A.get("/howclasses",{params:{date:this.date,workload:this.worklodid,number_classes:this.kolvo}});this.kolv=t.data;const e=this.kolv.length;e>0&&(this.errorsave=!0,this.r=!1,setTimeout((()=>{this.Abnull()}),3e3)),0==e&&(this.r=!0,this.backJournal.forEach((t=>{t[6]=this.kolvo})))}catch(t){console.log(t)}},async SendData2(){try{const t=await X.A.get("/saveJournal",{params:{backGroup:this.backJournal}});this.errorscheck.push(t)}catch(t){console.log(t)}},async Save(){try{this.SendData2(),0==this.errorscheck.length&&(this.save=!0,setTimeout((()=>{this.Abnulltabl()}),1e3))}catch(t){console.log(t),this.errorsave2=!0,setTimeout((()=>{this.Abnulltabl(),this.errorsave2=!1}),1e3)}},button(){return!!((!this.teacher&&!this.gr&&!this.discz&&!this.date&&!this.type)|1==this.r)},async fetchTeachers(){try{const t=await X.A.get("/teachers");this.backTeacher=t.data}catch(t){console.log(t)}},async getInfoByTeacherGroup(t){try{const e=await X.A.get(`/teachers/${t}`);this.groups=e.data}catch(e){console.log(e)}},async getInfoByTeacherDisc(){try{const t=await X.A.get("/discipline",{params:{teacher:this.teacher,gr:this.gr}});this.discs=t.data}catch(t){console.log(t)}},async getInfoByTeacherType(){try{const t=await X.A.get("/type",{params:{teacher:this.teacher,gr:this.gr,discz:this.discz}});this.types=t.data}catch(t){console.log(t)}},async getInfoAboutWorkload(){try{const t=await X.A.get("/workload",{params:{teacher:this.teacher,gr:this.gr,discz:this.discz,type:this.type}});this.workload=t.data,this.worklodid=t.data[0].id}catch(t){console.log(t)}},async fetchGroup(){try{const t=await X.A.get("/group",{params:{gr:this.gr}});t.data.forEach((t=>{this.backGroup.push({workload:this.worklodid,name:t.name,patronymic:t.patronymic,lastname:t.lastname,id:t.id,date:this.date,otm_posh:"П",otm_usp:"0",task:"-"})})),this.backGroup.forEach((t=>{this.backJournal.push([t.workload,t.id,t.date,"0","П","",0])})),t.data.forEach((t=>{this.resGroup.push(t.id)}))}catch(t){console.log(t)}this.show=!0}}};const xt=(0,C.A)(Qt,[["render",zt]]);var Vt=xt;const Dt={key:0},Kt=(0,a.Lk)("h3",{style:{color:"#347c99d6"}},[(0,a.Lk)("b",null,"Страница профиля пользователя")],-1),Wt={key:0},St={key:1,style:{color:"red"}};function $t(t,e,s,o,l,r){return(0,a.uX)(),(0,a.CE)(a.FK,null,[t.user&&!l.error?((0,a.uX)(),(0,a.CE)("div",Dt,[Kt,(0,a.Lk)("h3",null,[(0,a.eW)(" Здравствуйте, "),(0,a.Lk)("b",null,(0,F.v_)(t.user.username),1)]),(0,a.Lk)("h3",null,[(0,a.eW)(" Ваша роль: "),(0,a.Lk)("b",null,(0,F.v_)(l.role),1)]),this.gr?((0,a.uX)(),(0,a.CE)("h3",Wt,[(0,a.eW)(" Ваша группа: "),(0,a.Lk)("b",null,(0,F.v_)(l.gr),1)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),!t.user&&l.error?((0,a.uX)(),(0,a.CE)("h3",St,"Вы не вошли в систему!")):(0,a.Q3)("",!0)],64)}var qt={name:"UProfile",data(){return{role:"",error:!1,gr:""}},computed:{...(0,f.L8)(["user"])},methods:{rolecheck(){"teacher"==this.user.role&&(this.role="ПРЕПОДАВАТЕЛЬ"),"student"==this.user.role&&(this.role="СТУДЕНТ",this.gr=this.user.group),"admin"==this.user.role&&(this.role="АДМИНИСТРАТОР")}},created(){setTimeout((()=>{this.user||(this.error=!0,setTimeout((()=>{this.$router.push("/"),this.$store.dispatch("user",null)}),10)),this.user&&setTimeout((()=>{this.rolecheck()}),5)}),100)},updated(){setTimeout((()=>{this.user||(this.error=!0,setTimeout((()=>{this.$router.push("/"),this.$store.dispatch("user",null)}),50)),this.user&&setTimeout((()=>{this.rolecheck()}),5)}),100)}};const Ot=(0,C.A)(qt,[["render",$t]]);var Pt=Ot;const Bt=t=>((0,a.Qi)("data-v-3cf8fd5f"),t=t(),(0,a.jt)(),t),Nt={class:"form-signin"},Mt=Bt((()=>(0,a.Lk)("h1",{class:"h3 mb-3 fw-normal"},"Вход в журнал",-1))),Rt={key:0,class:"error-message"},Ht={class:"form-floating"},Yt=Bt((()=>(0,a.Lk)("label",null,"Логин",-1))),Zt={class:"form-floating"},te=["type"],ee=Bt((()=>(0,a.Lk)("label",null,"Пароль",-1))),se={class:"form-floating"},oe=Bt((()=>(0,a.Lk)("option",{disabled:"",value:""},"Роль",-1))),ae=Bt((()=>(0,a.Lk)("option",{value:"teacher"},"Преподаватель",-1))),le=Bt((()=>(0,a.Lk)("option",{value:"student"},"Студент",-1))),re=Bt((()=>(0,a.Lk)("option",{value:"admin"},"Администратор",-1))),ie=[oe,ae,le,re],ue=Bt((()=>(0,a.Lk)("label",null,"Роль",-1))),ne=Bt((()=>(0,a.Lk)("button",{class:"btn btn-primary w-100 py-2",type:"submit"}," Войти в аккаунт ",-1)));function he(t,e,s,l,r,i){return(0,a.uX)(),(0,a.CE)("div",Nt,[(0,a.Lk)("form",{onSubmit:e[4]||(e[4]=(0,o.D$)(((...t)=>i.login&&i.login(...t)),["prevent"]))},[Mt,r.error?((0,a.uX)(),(0,a.CE)("p",Rt,(0,F.v_)(r.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",Ht,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.username=t),class:"form-control",placeholder:"Фамилия Имя Отчество"},null,512),[[o.Jo,r.username]]),Yt]),(0,a.Lk)("div",Zt,[(0,a.bo)((0,a.Lk)("input",{type:r.showPassword?"text":"password","onUpdate:modelValue":e[1]||(e[1]=t=>r.password=t),class:"form-control",placeholder:"Введите пароль"},null,8,te),[[o.hp,r.password]]),ee,(0,a.Lk)("i",{class:(0,F.C4)(["icon",r.showPassword?"fa-solid fa-eye-slash":"fa-solid fa-eye"]),onClick:e[2]||(e[2]=t=>r.showPassword=!r.showPassword)},null,2)]),(0,a.Lk)("div",se,[(0,a.bo)((0,a.Lk)("select",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>r.role=t)},ie,512),[[o.u1,r.role]]),ue]),ne],32)])}var ce={name:"ULogin",data(){return{username:"",password:"",role:"",error:"",showPassword:!1}},methods:{async login(){try{const t=await X.A.post("/login",{username:this.username,password:this.password,role:this.role});localStorage.setItem("token",t.data.token),this.$store.dispatch("user",t.data.user[0]),this.$router.push("/profile")}catch(t){console.error("Login failed",t.response?.data.message||"Произошла непредвиденная ошибка"),this.showError(t.response?.data.message||"Произошла непредвиденная ошибка")}},showError(t){this.error=t,setTimeout((()=>{this.error="",this.password="",this.username="",this.password="",this.showPassword=!1}),3e3)}}};const de=(0,C.A)(ce,[["render",he],["__scopeId","data-v-3cf8fd5f"]]);var pe=de;const ke={key:0},ge=(0,a.Lk)("h2",{style:{color:"#347c99d6"}}," Страница просмотра журнала учёта посещаемости и успеваемости для студента ",-1),ve={class:"info-for-completion"},me=(0,a.Lk)("h2",null,"ФИО студента:",-1),ye=(0,a.Lk)("option",{disabled:"",value:""},"Студент",-1),Le=["value"],be=(0,a.Lk)("h2",null,"Группа:",-1),fe=(0,a.Lk)("option",{disabled:"",value:""},"Группа",-1),we=["value"],Ce=(0,a.Lk)("h2",null,"Выберите период, за который хотите получить данные:",-1),Ee={class:"dateformat"},_e=(0,a.Lk)("h2",{class:"dateitem"},"C:",-1),Xe=(0,a.Lk)("h2",{class:"dateitem"},"По:",-1),Te=(0,a.Lk)("h2",null,"Дисциплина:",-1),Ge=(0,a.Lk)("option",{disabled:"",value:""},"Выберите дисциплину",-1),Ae=["value"],Ie=(0,a.Lk)("br",null,null,-1),Fe=["disabled"],Ue={key:0},je=(0,a.Lk)("h1",{style:{color:"#347c99"}},"Загрузка ...",-1),Je=[je],ze={key:0},Qe=(0,a.Lk)("p",null,"Обозначения сокращений:",-1),xe=(0,a.Lk)("p",null,' Отметки посещаемости - "П", баллы успеваемости - "Б", задание или тема занятия (не более 100 знаков) - "З/Т" ',-1),Ve=(0,a.Lk)("p",null,' Отметки посещаемости: присутствие - "П", отсутствие - "О", отсутствие по уважительной причине - "ОПУ", отсутствие по болезни - "ОПБ" ',-1),De={class:"iksweb"},Ke=(0,a.Lk)("th",{rowspan:"3"},"№",-1),We=(0,a.Lk)("th",null,"Дата",-1),Se=["value"],$e={rowspan:"3"},qe=(0,a.Lk)("br",null,null,-1),Oe=(0,a.Lk)("br",null,null,-1),Pe=(0,a.Lk)("br",null,null,-1),Be=(0,a.Lk)("br",null,null,-1),Ne=(0,a.Lk)("th",null,"Вид занятия",-1),Me=["value"],Re=(0,a.Lk)("th",null,"ФИО студента",-1),He=["value"],Ye=(0,a.Lk)("div",{class:"otmetki"},[(0,a.Lk)("div",{class:"ych"},"П"),(0,a.Lk)("div",{class:"ych"},"Б"),(0,a.Lk)("div",{class:"ych"},"З/Т")],-1),Ze=[Ye],ts=["value"],es=["value"],ss={class:"otmetki"},os={class:"ych"},as={class:"ych"},ls={class:"ych"},rs={class:"page-wrapper"},is=["value"],us=["onClick"],ns={key:1},hs=(0,a.Lk)("p",{style:{color:"red"}},"Недостаточно данных, проверьте заполнение полей.",-1),cs=[hs],ds={key:2},ps=(0,a.Lk)("h2",{style:{color:"red"}}," Журнал ещё не был заполнен. ",-1),ks=[ps],gs={key:1},vs=(0,a.Lk)("p",{style:{color:"red"}},"Вы не вошли в аккаунт. Пожалуйста, авторизуйтесь.",-1),ms=[vs],ys={key:2},Ls=(0,a.Lk)("p",{style:{color:"red"}},"У вас нет прав доступа к этой странице.",-1),bs=[Ls];function fs(t,e,s,l,r,i){return(0,a.uX)(),(0,a.CE)(a.FK,null,[t.user&&"student"==t.user.role?((0,a.uX)(),(0,a.CE)("div",ke,[ge,(0,a.Lk)("form",ve,[me,(0,a.bo)((0,a.Lk)("select",{onChange:e[0]||(e[0]=t=>i.selectedStud()),"onUpdate:modelValue":e[1]||(e[1]=t=>r.student=t)},[ye,(0,a.Lk)("option",{value:t.user.id,required:""},(0,F.v_)(t.user.username),9,Le)],544),[[o.u1,r.student]]),be,(0,a.bo)((0,a.Lk)("select",{onChange:e[2]||(e[2]=t=>i.selectedGroup()),"onUpdate:modelValue":e[3]||(e[3]=t=>r.gr=t)},[fe,(0,a.Lk)("option",{value:t.user.group,required:""},(0,F.v_)(t.user.group),9,we)],544),[[o.u1,r.gr]]),Ce,(0,a.Lk)("div",Ee,[_e,(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>r.date1=t),required:"",pattern:"\\d{4}-\\d{2}-\\d{2}",class:"dateitem"},null,512),[[o.Jo,r.date1]]),Xe,(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=t=>r.date2=t),required:"",pattern:"\\d{4}-\\d{2}-\\d{2}",class:"dateitem"},null,512),[[o.Jo,r.date2]])]),Te,(0,a.bo)((0,a.Lk)("select",{onChange:e[6]||(e[6]=(...t)=>i.selectedDisc&&i.selectedDisc(...t)),"onUpdate:modelValue":e[7]||(e[7]=t=>r.discz=t)},[Ge,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.discs,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.id,value:t.id},(0,F.v_)(t.name),9,Ae)))),128))],544),[[o.u1,r.discz]])]),Ie,(0,a.Lk)("button",{disabled:i.button(),type:"button",class:"btn",onClick:e[8]||(e[8]=t=>i.getJournalST(this.worklodid3,this.student)),style:{"margin-left":"10px"}}," Найти журнал ",8,Fe),(0,a.Lk)("button",{type:"button",class:"btn",onClick:e[9]||(e[9]=t=>i.Abnull())},"Сбросить данные"),1==this.loading&&0==this.r?((0,a.uX)(),(0,a.CE)("div",Ue,Je)):(0,a.Q3)("",!0),(0,a.bF)(o.eB,null,{default:(0,a.k6)((()=>[!0===r.r&&0!=r.journalGroup.length?((0,a.uX)(),(0,a.CE)("div",ze,[Qe,xe,Ve,(0,a.Lk)("table",De,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[Ke,We,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.journalGroup.slice(this.gran1,this.gran2),((t,e)=>((0,a.uX)(),(0,a.CE)("th",{key:e,value:e},(0,F.v_)(t.dateform),9,Se)))),128)),(0,a.Lk)("th",$e,[(0,a.eW)(" Итоговый балл за период "),qe,(0,a.eW)(" с "),Oe,(0,a.eW)(" "+(0,F.v_)(this.date1)+" ",1),Pe,(0,a.eW)(" по "),Be,(0,a.eW)(" "+(0,F.v_)(this.date2),1)])]),(0,a.Lk)("tr",null,[Ne,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.journalGroup.slice(this.gran1,this.gran2),((t,e)=>((0,a.uX)(),(0,a.CE)("th",{key:e,value:e},(0,F.v_)(t.type),9,Me)))),128))]),(0,a.Lk)("tr",null,[Re,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.journalGroup.slice(this.gran1,this.gran2),((t,e)=>((0,a.uX)(),(0,a.CE)("th",{key:e,value:e},Ze,8,He)))),128))]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.Journal,((t,e)=>((0,a.uX)(),(0,a.CE)("tr",{key:e,value:e},[(0,a.Lk)("td",null,(0,F.v_)(e+1),1),(0,a.Lk)("td",null,(0,F.v_)(t.fio),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.dt.slice(this.gran1,this.gran2),((t,e)=>((0,a.uX)(),(0,a.CE)("td",{key:e,value:e},[(0,a.Lk)("div",ss,[(0,a.Lk)("div",os,(0,F.v_)(t.pos),1),(0,a.Lk)("div",as,(0,F.v_)(t.usp),1),(0,a.Lk)("div",ls,(0,F.v_)(t.task),1)])],8,es)))),128)),(0,a.Lk)("td",null,(0,F.v_)(this.sumotm),1)],8,ts)))),128))])]),(0,a.Lk)("div",rs,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.page,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t,value:t,class:(0,F.C4)(["page",{"current-page":r.pagenumber===t}])},[(0,a.Lk)("button",{type:"button",class:"btn",onClick:e=>i.CheckStr(t)},(0,F.v_)(t),9,us)],10,is)))),128))])])):(0,a.Q3)("",!0)])),_:1}),!0===r.r&&!r.gr|!r.discz|!r.student?((0,a.uX)(),(0,a.CE)("div",ns,cs)):(0,a.Q3)("",!0),1==r.r&&0==r.journalGroup.length&&r.gr&&r.discz&&r.student&&0==r.loading?((0,a.uX)(),(0,a.CE)("div",ds,ks)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),!t.user&&t.error?((0,a.uX)(),(0,a.CE)("div",gs,ms)):(0,a.Q3)("",!0),t.user&&"student"!=t.user.role?((0,a.uX)(),(0,a.CE)("div",ys,bs)):(0,a.Q3)("",!0)],64)}var ws=s(953),Cs={name:"JournalStudent",setup(){const t=(0,ws.KR)(!1);return{show:t}},data(){return{gr:"",discz:"",discs:[],student:"",backGroup:[],journalGroup:[],workload3:[],DateType:[],Journal:[],unique:[],backStud:[],r:!1,sumotm:0,gran1:0,gran2:5,page:1,pagenumber:0,date1:"",date2:"",loading:!1}},computed:{...(0,f.L8)(["user"])},created(){setTimeout((()=>{this.user||(this.error=!0,setTimeout((()=>{this.$router.push("/"),this.$store.dispatch("user",null)}),100)),this.user&&"student"!=this.user.role&&setTimeout((()=>{this.$router.push("/profile")}),100)}),1e3)},methods:{CheckStr(t){1==t&&(this.gran1=0,this.gran2=5,this.pagenumber=t),t>1&&(this.gran1=0,this.gran2=5,this.gran1=this.gran1+5*(t-1),this.gran2=this.gran2+5*(t-1),this.pagenumber=t)},button(){return!!(!this.student&!this.gr&!this.discz|1==this.r)},selectedStud(){this.CheckSTudGroup()},async CheckSTudGroup(){try{const t=await X.A.get("http://localhost:5000/perecgroup",{params:{id:this.user.id}});this.gr=t.data}catch(t){console.log(t)}},selectedDisc(){this.Journal.push({id:this.user.id,fio:this.user.username,dt:[]}),0!=this.workload3.lenght&&(this.workload3=[]),this.getInfoAboutWorkload3(this.group,this.discz)},selectedGroup(){this.fetchDiscs(this.gr)},async getInfoAboutWorkload3(){try{const t=await X.A.get("http://localhost:5000/workload3",{params:{gr:this.gr,discz:this.discz}});await t.data.forEach((t=>{this.workload3.push([t.id])}))}catch(t){console.log(t)}},getALLJournal(){this.journalGroup.forEach((t=>{const e=t.date,s=t.type,o=t.otm_posh,a=t.otm_usp,l=t.task;this.Journal[0].dt.push({date:e,type:s,pos:o,usp:a,task:l}),this.sumotm=this.sumotm+t.otm_usp})),this.loading=!0,setTimeout((()=>{this.r=!0,this.loading=!1}),1e3)},async getJournalST(){try{const t=await X.A.get("http://localhost:5000/journalgroupstudent",{params:{workload:this.workload3,student:this.student,date1:this.date1,date2:this.date2}});this.journalGroup=t.data;const e=this.journalGroup.length;this.page=Math.ceil(e/5),this.getALLJournal()}catch(t){console.log(t)}},async fetchDiscs(){try{const t=await X.A.get("http://localhost:5000/studentfisc",{params:{gr:this.gr}});this.discs=t.data}catch(t){console.log(t)}},Abnull(){this.discz="",this.r=!1,this.journalGroup=[],this.workload3=[],this.dt=[],this.Journal=[],this.sumotm=0,this.date1="",this.date2="",this.loading=!1}}};const Es=(0,C.A)(Cs,[["render",fs]]);var _s=Es;const Xs={key:0},Ts=(0,a.Lk)("h2",{style:{color:"#347c99d6"}}," Страница просмотра журнала учёта посещаемости и успеваемости для преподавателя ",-1),Gs={class:"info-for-completion"},As=(0,a.Lk)("h2",null,"Преподаватель:",-1),Is=(0,a.Lk)("option",{disabled:"",value:""},"Преподаватель",-1),Fs=["value"],Us=(0,a.Lk)("h2",null,"Группа:",-1),js=(0,a.Lk)("option",{disabled:"",value:""},"Выберите группу",-1),Js=(0,a.Lk)("h2",null,"Выберите период, за который хотите получить данные:",-1),zs={class:"dateformat"},Qs=(0,a.Lk)("h2",{class:"dateitem"},"C:",-1),xs=(0,a.Lk)("h2",{class:"dateitem"},"По:",-1),Vs=(0,a.Lk)("h2",null,"Дисциплина:",-1),Ds=(0,a.Lk)("option",{disabled:"",value:""},"Выберите дисциплину",-1),Ks=["value"],Ws=(0,a.Lk)("br",null,null,-1),Ss=["disabled"],$s=(0,a.Lk)("br",null,null,-1),qs={key:0,class:"otmetkiupd"},Os=(0,a.Lk)("div",{class:"conteiner"},[(0,a.Lk)("p",null,"Студент"),(0,a.Lk)("p",null,"Дата"),(0,a.Lk)("p",null,"Вид занятия"),(0,a.Lk)("p",null,"Номер занятия")],-1),Ps={class:"conteiner"},Bs=(0,a.Lk)("div",{class:"conteiner"},[(0,a.Lk)("p",null,"Посещаемость"),(0,a.Lk)("p",null,"Успеваемость"),(0,a.Lk)("p",null,"Задание/Тема"),(0,a.Lk)("p")],-1),Ns={class:"conteiner"},Ms={key:1},Rs=(0,a.Lk)("h1",{style:{color:"#347c99"}},"Загрузка ...",-1),Hs=[Rs],Ys={key:2},Zs=(0,a.Lk)("p",null,"Обозначения сокращений:",-1),to=(0,a.Lk)("p",null,' Отметка посещаемости - "П", балл успеваемости - "Б", задание или тема занятия (не более 100 знаков) - "З/Т", изменение данных ячейки - "И" ',-1),eo=(0,a.Lk)("p",null,' Отметки посещаемости: присутствие - "П", отсутствие - "О", отсутствие по уважительной причине - "ОПУ", отсутствие по болезни - "ОПБ" ',-1),so={class:"iksweb"},oo=(0,a.Lk)("th",{rowspan:"4"},"№",-1),ao=(0,a.Lk)("th",null,"Дата",-1),lo=["value"],ro={rowspan:"4"},io=(0,a.Lk)("br",null,null,-1),uo=(0,a.Lk)("br",null,null,-1),no=(0,a.Lk)("br",null,null,-1),ho=(0,a.Lk)("br",null,null,-1),co=(0,a.Lk)("th",null,"Вид занятия",-1),po=["value"],ko=(0,a.Lk)("th",null,"Номер занятия",-1),go=["value"],vo=(0,a.Lk)("th",null,"Список студентов",-1),mo=["value"],yo=(0,a.Lk)("div",{class:"otmetki"},[(0,a.Lk)("div",{class:"ych"},"П"),(0,a.Lk)("div",{class:"ych"},"Б"),(0,a.Lk)("div",{class:"ych"},"З/Т"),(0,a.Lk)("div",{class:"ych"},"И")],-1),Lo=[yo],bo=["value"],fo=["value"],wo={class:"otmetki"},Co={class:"ych"},Eo={class:"ych"},_o={class:"ych"},Xo={class:"ych"},To=["onClick"],Go={class:"page-wrapper"},Ao=["value"],Io=["onClick"],Fo={key:3},Uo=(0,a.Lk)("h2",{style:{color:"red"}}," Недостаточно данных, проверьте заполнение полей. ",-1),jo=[Uo],Jo={key:4},zo=(0,a.Lk)("h1",{style:{color:"red"}},"Журнал ещё не был заполнен, перейдите на страницу заполнения, чтобы добавить страницу журнала.",-1),Qo=[zo],xo={key:1},Vo=(0,a.Lk)("p",{style:{color:"red"}}," Вы не вошли в аккаунт. Пожалуйста, авторизуйтесь. ",-1),Do=[Vo],Ko={key:2},Wo=(0,a.Lk)("p",{style:{color:"red"}},"У вас нет прав доступа к этой странице.",-1),So=[Wo];function $o(t,e,s,l,r,i){return(0,a.uX)(),(0,a.CE)(a.FK,null,[t.user&&"teacher"==t.user.role?((0,a.uX)(),(0,a.CE)("div",Xs,[Ts,(0,a.Lk)("form",Gs,[As,(0,a.bo)((0,a.Lk)("select",{onChange:e[0]||(e[0]=t=>i.selectedGroup()),"onUpdate:modelValue":e[1]||(e[1]=t=>r.teacher=t)},[Is,(0,a.Lk)("option",{value:t.user.id,required:""},(0,F.v_)(t.user.username),9,Fs)],544),[[o.u1,r.teacher]]),Us,(0,a.bo)((0,a.Lk)("select",{onChange:e[2]||(e[2]=t=>i.selectedDisc()),"onUpdate:modelValue":e[3]||(e[3]=t=>r.gr=t)},[js,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.groups,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.id},(0,F.v_)(t.group),1)))),128))],544),[[o.u1,r.gr]]),Js,(0,a.Lk)("div",zs,[Qs,(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=t=>r.date1=t),required:"",pattern:"\\d{4}-\\d{2}-\\d{2}",class:"dateitem"},null,512),[[o.Jo,r.date1]]),xs,(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":e[5]||(e[5]=t=>r.date2=t),required:"",pattern:"\\d{4}-\\d{2}-\\d{2}",class:"dateitem"},null,512),[[o.Jo,r.date2]])]),Vs,(0,a.bo)((0,a.Lk)("select",{onChange:e[6]||(e[6]=t=>i.selectedWorkload()),"onUpdate:modelValue":e[7]||(e[7]=t=>r.discz=t)},[Ds,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.discs,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.discipline,value:t.discipline},(0,F.v_)(t.name),9,Ks)))),128))],544),[[o.u1,r.discz]])]),Ws,(0,a.Lk)("button",{disabled:i.button(),type:"button",class:"btn",onClick:e[8]||(e[8]=t=>i.getJournal())}," Найти журнал ",8,Ss),(0,a.Lk)("button",{type:"button",onClick:e[9]||(e[9]=t=>i.Abnull()),class:"btn",style:{"margin-left":"10px"}}," Сбросить данные "),$s,1==this.r&&1==this.updateokno?((0,a.uX)(),(0,a.CE)("div",qs,[Os,(0,a.Lk)("div",Ps,[(0,a.Lk)("p",null,(0,F.v_)(this.idstudent),1),(0,a.Lk)("p",null,(0,F.v_)(this.datajourn),1),(0,a.Lk)("p",null,(0,F.v_)(this.typechoose),1),(0,a.Lk)("p",null,(0,F.v_)(this.nc+1),1)]),Bs,(0,a.Lk)("div",Ns,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>r.poseh=t),class:"ych",ref:"typeBox",id:"typeBox"},null,512),[[o.Jo,r.poseh]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>r.usev=t),class:"ych"},null,512),[[o.Jo,r.usev]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>r.tasks=t),class:"ych"},null,512),[[o.Jo,r.tasks]]),(0,a.Lk)("button",{class:"ych, btn",onClick:e[13]||(e[13]=t=>i.Update())},"Сохранить изменения")])])):(0,a.Q3)("",!0),1==this.loading&&0==this.r?((0,a.uX)(),(0,a.CE)("div",Ms,Hs)):(0,a.Q3)("",!0),!0===this.r&&0!=r.journalGroup.length?((0,a.uX)(),(0,a.CE)("div",Ys,[(0,a.bF)(o.eB,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",null,[Zs,to,eo,(0,a.Lk)("table",so,[(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[oo,ao,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.DateType.slice(this.gran1,this.gran2),((t,e)=>((0,a.uX)(),(0,a.CE)("th",{key:e,value:e},(0,F.v_)(t.dateform),9,lo)))),128)),(0,a.Lk)("th",ro,[(0,a.eW)(" Итоговый балл за период "),io,(0,a.eW)(" с "),uo,(0,a.eW)(" "+(0,F.v_)(this.date1)+" ",1),no,(0,a.eW)(" по "),ho,(0,a.eW)(" "+(0,F.v_)(this.date2),1)])]),(0,a.Lk)("tr",null,[co,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.DateType.slice(this.gran1,this.gran2),((t,e)=>((0,a.uX)(),(0,a.CE)("th",{key:e,value:e},(0,F.v_)(t.type),9,po)))),128))]),(0,a.Lk)("tr",null,[ko,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.DateType.slice(this.gran1,this.gran2),((t,e)=>((0,a.uX)(),(0,a.CE)("th",{key:e,value:e},(0,F.v_)(t.number_classes+1),9,go)))),128))]),(0,a.Lk)("tr",null,[vo,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.DateType.slice(this.gran1,this.gran2),((t,e)=>((0,a.uX)(),(0,a.CE)("th",{key:e,value:e},Lo,8,mo)))),128))]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.Journal,((t,e)=>((0,a.uX)(),(0,a.CE)("tr",{key:e,value:e},[(0,a.Lk)("td",null,(0,F.v_)(e+1),1),(0,a.Lk)("td",null,(0,F.v_)(t.name)+" "+(0,F.v_)(t.patronymic)+" "+(0,F.v_)(t.lastname),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.dt.slice(this.gran1,this.gran2),((e,s)=>((0,a.uX)(),(0,a.CE)("td",{key:s,value:s},[(0,a.Lk)("div",wo,[(0,a.Lk)("div",Co,(0,F.v_)(e.pos),1),(0,a.Lk)("div",Eo,(0,F.v_)(e.usp),1),(0,a.Lk)("div",_o,(0,F.v_)(e.task),1),(0,a.Lk)("div",Xo,[(0,a.Lk)("button",{type:"button",onClick:s=>i.InfoForUpdate(t.id,e.num-1),class:"btn"},(0,F.v_)(e.num),9,To)])])],8,fo)))),128)),(0,a.Lk)("td",null,(0,F.v_)(t.sumbal),1)],8,bo)))),128))])]),(0,a.Lk)("div",Go,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.page,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t,value:t,class:(0,F.C4)(["page",{"current-page":r.pagenumber===t}])},[(0,a.Lk)("button",{type:"button",class:"btn",onClick:e=>i.CheckStr(t)},(0,F.v_)(t),9,Io)],10,Ao)))),128))])])])),_:1})])):(0,a.Q3)("",!0),!0===r.r&&!r.gr|!r.discz|!r.teacher&&0==r.loading?((0,a.uX)(),(0,a.CE)("div",Fo,jo)):(0,a.Q3)("",!0),!0===r.r&&0==r.journalGroup.length&&r.gr&&r.discz&&r.discz&&r.teacher&&0==r.loading?((0,a.uX)(),(0,a.CE)("div",Jo,Qo)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),!t.user&&t.error?((0,a.uX)(),(0,a.CE)("div",xo,Do)):(0,a.Q3)("",!0),t.user&&"teacher"!=t.user.role?((0,a.uX)(),(0,a.CE)("div",Ko,So)):(0,a.Q3)("",!0)],64)}var qo={name:"CheckTeacher",setup(){const t=(0,ws.KR)(!1);return{show:t}},data(){return{teacher:"",gr:"",discz:"",groups:[],discs:[],backGroup:[],journalGroup:[],workload2:[],DateType:[],Journal:[],unique:[],r:!1,sumotm:0,otm:[],gran1:0,gran2:5,page:1,pagenumber:0,poseh:"",usev:"",tasks:"",idstudent:"",idzan:"",idwork:"",datajourn:"",idjr:"",nc:"",nums:0,updateokno:!1,typechoose:"",loading:!1,date1:"",date2:""}},computed:{...(0,f.L8)(["user"])},created(){setTimeout((()=>{this.user||(this.error=!0,setTimeout((()=>{this.$router.push("/"),this.$store.dispatch("user",null)}),100)),this.user&&"teacher"!=this.user.role&&setTimeout((()=>{this.$router.push("/profile")}),100)}),1e3)},methods:{async Update(){try{await X.A.get("http://localhost:5000/update",{params:{id:this.idjr,otm_posh:this.poseh,otm_usp:this.usev,task:this.tasks}});this.Journal=[],this.journalGroup=[],this.getJournal(),this.updateokno=!1}catch(t){console.log(t)}},InfoForUpdate(t,e){window.requestAnimationFrame((()=>this.$refs.typeBox.focus())),this.loading=!0,this.Journal.forEach((s=>{s.id==t&&(this.usev=s.dt[e].usp,this.poseh=s.dt[e].pos,this.tasks=s.dt[e].task,this.idwork=s.dt[e].idworkload,this.idjr=s.dt[e].idjournal,this.idstudent=s.name+" "+s.patronymic+" "+s.lastname,this.idzan=e),this.journalGroup.forEach((t=>{t.id==this.idjr&&(this.datajourn=t.dateform,this.typechoose=t.type,this.nc=t.number_classes)}))})),this.updateokno=!0},CheckStr(t){1==t&&(this.gran1=0,this.gran2=5,this.pagenumber=t),t>1&&(this.gran1=0,this.gran2=5,this.gran1=this.gran1+5*(t-1),this.gran2=this.gran2+5*(t-1),this.pagenumber=t)},funct(){this.Journal.forEach((t=>{t.dt.forEach((t=>{this.sumotm=this.sumotm+t.usp})),t.sumbal=this.sumotm,this.sumotm=0}))},button(){return!!(!this.teacher&!this.gr&!this.discz|1==this.r)},Abnull(){this.gr="",this.discz="",this.groups=[],this.discs=[],this.backGroup=[],this.journalGroup=[],this.workload2=[],this.DateType=[],this.Journal=[],this.unique=[],this.teacher="",this.r=!1,this.date1="",this.date2=""},selectedGroup(){this.getInfoByTeacherGroup(this.teacher)},selectedDisc(){this.getInfoByTeacherDisc(this.teacher,this.gr)},selectedWorkload(){this.getInfoAboutWorkload2(this.teacher,this.gr,this.discz),this.fetchGroup(this.gr)},async getInfoByTeacherGroup(t){try{const e=await X.A.get(`http://localhost:5000/teachers/${t}`);this.groups=e.data}catch(e){console.log(e)}},async getInfoByTeacherDisc(){try{const t=await X.A.get("http://localhost:5000/discipline",{params:{teacher:this.teacher,gr:this.gr}});this.discs=t.data}catch(t){console.log(t)}},async getInfoByTeacherType(){try{const t=await X.A.get("http://localhost:5000/type",{params:{teacher:this.teacher,gr:this.gr,discz:this.discz}});this.types=t.data}catch(t){console.log(t)}},async fetchGroup(){try{const t=await X.A.get("http://localhost:5000/group",{params:{gr:this.gr}});this.backGroup=t.data}catch(t){console.log(t)}},async getInfoAboutWorkload2(){try{const t=await X.A.get("http://localhost:5000/workload2",{params:{teacher:this.teacher,gr:this.gr,discz:this.discz}});await t.data.forEach((t=>{this.workload2.push([t.id])}));const e=await X.A.get("http://localhost:5000/datetype",{params:{workload:this.workload2,date1:this.date1,date2:this.date2}});this.DateType=e.data;const s=this.DateType.length;this.page=Math.ceil(s/5)}catch(t){console.log(t)}},async getJournal(){try{const t=await X.A.get("http://localhost:5000/journalgroup",{params:{workload:this.workload2,date1:this.date1,date2:this.date2}});this.journalGroup=t.data,this.getALLJournal()}catch(t){console.log(t)}},async getALLJournal(){try{await X.A.get("http://localhost:5000/journal",{params:{workload:this.workload2}});this.backGroup.forEach((t=>{this.Journal.push({id:t.id,name:t.name,patronymic:t.patronymic,lastname:t.lastname,sumbal:0,dt:[]})})),this.Journal.forEach((t=>{this.journalGroup.forEach((e=>{const s=e.dateform,o=e.type,a=e.otm_posh,l=e.otm_usp,r=e.task,i=e.id,u=e.workload,n=e.date;t.id===e.student&&(this.nums=this.nums+1,t.dt.push({num:this.nums,date:s,type:o,pos:a,usp:l,task:r,idjournal:i,idworkload:u,datejournal:n}))})),this.nums=0})),this.funct(),this.loading=!0,setTimeout((()=>{this.r=!0,this.loading=!1}),3e3)}catch(t){console.log(t)}}}};const Oo=(0,C.A)(qo,[["render",$o]]);var Po=Oo;const Bo={key:0},No=(0,a.Lk)("h2",{style:{color:"#347c99d6"}}," Страница администратора для регистрирования учётных записей ",-1),Mo=(0,a.Lk)("h2",null,"Выберите роль регистрируемого:",-1),Ro=(0,a.Lk)("option",{disabled:"",value:""},"Роль",-1),Ho=(0,a.Lk)("option",{value:"teacher"},"Преподаватель",-1),Yo=(0,a.Lk)("option",{value:"student"},"Студент",-1),Zo=[Ro,Ho,Yo],ta={key:0},ea=(0,a.Lk)("h2",null,"Выберите группу студента:",-1),sa=["value"],oa={key:1},aa=(0,a.Lk)("h2",null,"Выберите факультет:",-1),la=["value"],ra=(0,a.Lk)("h2",null,"Выберите ФИО регистрируемого:",-1),ia=(0,a.Lk)("option",{disabled:"",value:""},"ФИО",-1),ua=["value"],na=(0,a.Lk)("br",null,null,-1),ha={key:2,style:{color:"red"}},ca={key:3},da=(0,a.Lk)("h2",null,"Задайте пароль:",-1),pa={class:"input-group"},ka=["type"],ga={key:0,style:{color:"#347c99d6"}},va=(0,a.Lk)("br",null,null,-1),ma=["disabled"];function ya(t,e,s,l,r,i){return t.user&&"admin"==t.user.role?((0,a.uX)(),(0,a.CE)("div",Bo,[No,Mo,(0,a.bo)((0,a.Lk)("select",{onChange:e[0]||(e[0]=t=>i.selectedRole()),"onUpdate:modelValue":e[1]||(e[1]=t=>r.rolereq=t)},Zo,544),[[o.u1,r.rolereq]]),"student"==r.rolereq?((0,a.uX)(),(0,a.CE)("div",ta,[ea,(0,a.bo)((0,a.Lk)("select",{onChange:e[2]||(e[2]=t=>i.selectedINFO()),"onUpdate:modelValue":e[3]||(e[3]=t=>r.group=t)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.groups,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.group,value:t.group},(0,F.v_)(t.group),9,sa)))),128))],544),[[o.u1,r.group]])])):(0,a.Q3)("",!0),"teacher"==r.rolereq?((0,a.uX)(),(0,a.CE)("div",oa,[aa,(0,a.bo)((0,a.Lk)("select",{onChange:e[4]||(e[4]=t=>i.selectedINFO()),"onUpdate:modelValue":e[5]||(e[5]=t=>r.faculty=t)},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.facultys,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.division_curriculum,value:t.division_curriculum},(0,F.v_)(t.division_curriculum),9,la)))),128))],544),[[o.u1,r.faculty]])])):(0,a.Q3)("",!0),ra,(0,a.bo)((0,a.Lk)("select",{onChange:e[6]||(e[6]=t=>i.selectedFIO()),"onUpdate:modelValue":e[7]||(e[7]=t=>r.login=t)},[ia,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.spisok,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.id,value:t.id},(0,F.v_)(t.username),9,ua)))),128))],544),[[o.u1,r.login]]),na,r.login&&null!=this.checkpassword?((0,a.uX)(),(0,a.CE)("h3",ha," Пользователю уже задан пароль ")):(0,a.Q3)("",!0),r.login&&null==this.checkpassword?((0,a.uX)(),(0,a.CE)("div",ca,[da,(0,a.Lk)("div",pa,[(0,a.bo)((0,a.Lk)("input",{type:r.showPassword?"text":"password","onUpdate:modelValue":e[8]||(e[8]=t=>r.password=t),placeholder:"Введите пароль"},null,8,ka),[[o.hp,r.password]]),(0,a.Lk)("i",{class:(0,F.C4)(["icon",r.showPassword?"fa-solid fa-eye-slash":"fa-solid fa-eye"]),onClick:e[9]||(e[9]=t=>r.showPassword=!r.showPassword)},null,2)]),1==this.save?((0,a.uX)(),(0,a.CE)("h3",ga," Успешно сохранено ")):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),va,(0,a.Lk)("button",{disabled:i.button(),type:"button",onClick:e[10]||(e[10]=t=>i.sendDataAdmin()),class:"btn"}," Сохранить данные ",8,ma)])):(0,a.Q3)("",!0)}var La={name:"AdminPage",data(){return{rolereq:"",login:"",group:"",spisok:[],groups:[],faculty:"",facultys:[],password:"",save:"",checkpassword:"",showPassword:!1}},computed:{...(0,f.L8)(["user"])},created(){setTimeout((()=>{this.user||(this.error=!0,setTimeout((()=>{this.$router.push("/"),this.$store.dispatch("user",null)}),100)),this.user&&"admin"!=this.user.role&&setTimeout((()=>{this.$router.push("/profile")}),100)}),1e3)},methods:{selectedFIO(){this.CheckUser()},async CheckUser(){try{const t=await X.A.get("http://localhost:5000/checkaccaunt",{params:{role:this.rolereq,id:this.login}});this.checkpassword=t.data[0].password}catch(t){console.log(t)}},button(){return!(this.rolereq||this.login||this.group)},selectedRole(){"teacher"==this.rolereq&&this.getListUserFaculty(),"student"==this.rolereq&&this.getListUserGroup()},selectedINFO(){this.getListUser()},async getListUser(){try{const t=await X.A.get("http://localhost:5000/listuser",{params:{role:this.rolereq,group:this.group,division_curriculum:this.faculty}});this.spisok=t.data}catch(t){console.log(t)}},async getListUserGroup(){try{const t=await X.A.get("http://localhost:5000/listuserstudent");this.groups=t.data}catch(t){console.log(t)}},async getListUserFaculty(){try{const t=await X.A.get("http://localhost:5000/listuserfaculty");this.facultys=t.data}catch(t){console.log(t)}},async sendDataAdmin(){try{const t=await X.A.get("http://localhost:5000/saveinfoaccount",{params:{role:this.rolereq,id:this.login,password:this.password}});t&&setTimeout((()=>{this.save=!0,setTimeout((()=>{this.rolereq="",this.login="",this.group="",this.spisok=[],this.groups=[],this.faculty="",this.facultys=[],this.password="",this.checkpassword="",this.showPassword=!1,this.save=!1}),1e3)}),100)}catch(t){console.log(t)}}}};const ba=(0,C.A)(La,[["render",ya]]);var fa=ba;const wa=[{path:"/profile",component:Pt},{path:"/journalwriteteacher",component:Vt},{path:"/",component:pe},{path:"/checkstudent",component:_s},{path:"/checkteacher",component:Po},{path:"/admin",component:fa}],Ca=(0,I.aE)({history:(0,I.LA)("/"),routes:wa});var Ea=Ca;const _a={user:null};var Xa=(0,f.y$)({state:_a,getters:{user:t=>t.user},actions:{user(t,e){t.commit("user",e)}},mutations:{user(t,e){t.user=e}}});X.A.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("token"),(0,o.Ef)(A).use(Xa).use(Ea).mount("#app")}},e={};function s(o){var a=e[o];if(void 0!==a)return a.exports;var l=e[o]={exports:{}};return t[o].call(l.exports,l,l.exports,s),l.exports}s.m=t,function(){var t=[];s.O=function(e,o,a,l){if(!o){var r=1/0;for(h=0;h<t.length;h++){o=t[h][0],a=t[h][1],l=t[h][2];for(var i=!0,u=0;u<o.length;u++)(!1&l||r>=l)&&Object.keys(s.O).every((function(t){return s.O[t](o[u])}))?o.splice(u--,1):(i=!1,l<r&&(r=l));if(i){t.splice(h--,1);var n=a();void 0!==n&&(e=n)}}return e}l=l||0;for(var h=t.length;h>0&&t[h-1][2]>l;h--)t[h]=t[h-1];t[h]=[o,a,l]}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,l,r=o[0],i=o[1],u=o[2],n=0;if(r.some((function(e){return 0!==t[e]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(u)var h=u(s)}for(e&&e(o);n<r.length;n++)l=r[n],s.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return s.O(h)},o=self["webpackChunkfront_vue_auth"]=self["webpackChunkfront_vue_auth"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(2842)}));o=s.O(o)})();
//# sourceMappingURL=app.160ab6ae.js.map